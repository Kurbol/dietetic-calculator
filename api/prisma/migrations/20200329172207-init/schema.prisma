datasource db {
  provider = "sqlite"
  url = "***"
  default  = true
}

generator client {
  provider = "prisma-client-js"
}

model CalculatorCategory {
  id          Int          @default(autoincrement()) @id
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt
  name        String       @unique
  calculators Calculator[]
  icon        String?
}

model Calculator {
  id                Int                @default(autoincrement()) @id
  createdAt         DateTime           @default(now())
  updatedAt         DateTime           @updatedAt
  key               String             @unique
  name              String             @unique
  description       String
  defaultOutputUnit String
  category          CalculatorCategory @relation(references: [id])
  inputs            Input[]            @relation(references: [id])
  selects           Select[]           @relation(references: [id])
}

model Input {
  id           Int          @default(autoincrement()) @id
  createdAt    DateTime     @default(now())
  updatedAt    DateTime     @updatedAt
  name         String       @unique
  defaultUnit  String
  icon         String?
  unitCategory UnitCategory @relation(references: [id])
  calculators  Calculator[] @relation(references: [id])
}

model SelectOption {
  id        Int      @default(autoincrement()) @id
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  text      String
  select    Select   @relation(references: [id])

  @@unique([select, text])
}

model Select {
  id          Int            @default(autoincrement()) @id
  createdAt   DateTime       @default(now())
  updatedAt   DateTime       @updatedAt
  name        String         @unique
  icon        String?
  options     SelectOption[]
  calculators Calculator[]   @relation(references: [id])
}

model UnitCategory {
  id        Int      @default(autoincrement()) @id
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  name      String   @unique
  units     Unit[]
  inputs    Input[]
}

model Unit {
  id        Int          @default(autoincrement()) @id
  createdAt DateTime     @default(now())
  updatedAt DateTime     @updatedAt
  name      String       @unique
  symbol    String       @unique
  factor    Float
  category  UnitCategory @relation(references: [id])
}