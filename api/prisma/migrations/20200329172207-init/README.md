# Migration `20200329172207-init`

This migration has been generated by Curtis Bollinger at 3/29/2020, 5:22:07 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "quaint"."CalculatorCategory" (
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "icon" TEXT   ,
    "id" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT,
    "name" TEXT NOT NULL DEFAULT '' ,
    "updatedAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' 
) 

CREATE TABLE "quaint"."Calculator" (
    "category" INTEGER NOT NULL  ,
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "defaultOutputUnit" TEXT NOT NULL DEFAULT '' ,
    "description" TEXT NOT NULL DEFAULT '' ,
    "id" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT,
    "key" TEXT NOT NULL DEFAULT '' ,
    "name" TEXT NOT NULL DEFAULT '' ,
    "updatedAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,FOREIGN KEY ("category") REFERENCES "CalculatorCategory"("id") ON DELETE CASCADE ON UPDATE CASCADE
) 

CREATE TABLE "quaint"."Input" (
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "defaultUnit" TEXT NOT NULL DEFAULT '' ,
    "icon" TEXT   ,
    "id" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT,
    "name" TEXT NOT NULL DEFAULT '' ,
    "unitCategory" INTEGER NOT NULL  ,
    "updatedAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,FOREIGN KEY ("unitCategory") REFERENCES "UnitCategory"("id") ON DELETE CASCADE ON UPDATE CASCADE
) 

CREATE TABLE "quaint"."SelectOption" (
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "id" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT,
    "select" INTEGER NOT NULL  ,
    "text" TEXT NOT NULL DEFAULT '' ,
    "updatedAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,FOREIGN KEY ("select") REFERENCES "Select"("id") ON DELETE CASCADE ON UPDATE CASCADE
) 

CREATE TABLE "quaint"."Select" (
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "icon" TEXT   ,
    "id" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT,
    "name" TEXT NOT NULL DEFAULT '' ,
    "updatedAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' 
) 

CREATE TABLE "quaint"."UnitCategory" (
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "id" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT,
    "name" TEXT NOT NULL DEFAULT '' ,
    "updatedAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' 
) 

CREATE TABLE "quaint"."Unit" (
    "category" INTEGER NOT NULL  ,
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "factor" REAL NOT NULL DEFAULT 0 ,
    "id" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT,
    "name" TEXT NOT NULL DEFAULT '' ,
    "symbol" TEXT NOT NULL DEFAULT '' ,
    "updatedAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,FOREIGN KEY ("category") REFERENCES "UnitCategory"("id") ON DELETE CASCADE ON UPDATE CASCADE
) 

CREATE TABLE "quaint"."_CalculatorToInput" (
    "A" INTEGER NOT NULL  ,
    "B" INTEGER NOT NULL  ,FOREIGN KEY ("A") REFERENCES "Calculator"("id") ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY ("B") REFERENCES "Input"("id") ON DELETE CASCADE ON UPDATE CASCADE
) 

CREATE TABLE "quaint"."_CalculatorToSelect" (
    "A" INTEGER NOT NULL  ,
    "B" INTEGER NOT NULL  ,FOREIGN KEY ("A") REFERENCES "Calculator"("id") ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY ("B") REFERENCES "Select"("id") ON DELETE CASCADE ON UPDATE CASCADE
) 

CREATE UNIQUE INDEX "quaint"."CalculatorCategory.name" ON "CalculatorCategory"("name")

CREATE UNIQUE INDEX "quaint"."Calculator.key" ON "Calculator"("key")

CREATE UNIQUE INDEX "quaint"."Calculator.name" ON "Calculator"("name")

CREATE UNIQUE INDEX "quaint"."Input.name" ON "Input"("name")

CREATE UNIQUE INDEX "quaint"."SelectOption.select_text" ON "SelectOption"("select","text")

CREATE UNIQUE INDEX "quaint"."Select.name" ON "Select"("name")

CREATE UNIQUE INDEX "quaint"."UnitCategory.name" ON "UnitCategory"("name")

CREATE UNIQUE INDEX "quaint"."Unit.name" ON "Unit"("name")

CREATE UNIQUE INDEX "quaint"."Unit.symbol" ON "Unit"("symbol")

CREATE UNIQUE INDEX "quaint"."_CalculatorToInput_AB_unique" ON "_CalculatorToInput"("A","B")

CREATE  INDEX "quaint"."_CalculatorToInput_B_index" ON "_CalculatorToInput"("B")

CREATE UNIQUE INDEX "quaint"."_CalculatorToSelect_AB_unique" ON "_CalculatorToSelect"("A","B")

CREATE  INDEX "quaint"."_CalculatorToSelect_B_index" ON "_CalculatorToSelect"("B")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200329172207-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,81 @@
+datasource db {
+  provider = "sqlite"
+  url      = "file:./data.db"
+  default  = true
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+model CalculatorCategory {
+  id          Int          @default(autoincrement()) @id
+  createdAt   DateTime     @default(now())
+  updatedAt   DateTime     @updatedAt
+  name        String       @unique
+  calculators Calculator[]
+  icon        String?
+}
+
+model Calculator {
+  id                Int                @default(autoincrement()) @id
+  createdAt         DateTime           @default(now())
+  updatedAt         DateTime           @updatedAt
+  key               String             @unique
+  name              String             @unique
+  description       String
+  defaultOutputUnit String
+  category          CalculatorCategory @relation(references: [id])
+  inputs            Input[]            @relation(references: [id])
+  selects           Select[]           @relation(references: [id])
+}
+
+model Input {
+  id           Int          @default(autoincrement()) @id
+  createdAt    DateTime     @default(now())
+  updatedAt    DateTime     @updatedAt
+  name         String       @unique
+  defaultUnit  String
+  icon         String?
+  unitCategory UnitCategory @relation(references: [id])
+  calculators  Calculator[] @relation(references: [id])
+}
+
+model SelectOption {
+  id        Int      @default(autoincrement()) @id
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+  text      String
+  select    Select   @relation(references: [id])
+
+  @@unique([select, text])
+}
+
+model Select {
+  id          Int            @default(autoincrement()) @id
+  createdAt   DateTime       @default(now())
+  updatedAt   DateTime       @updatedAt
+  name        String         @unique
+  icon        String?
+  options     SelectOption[]
+  calculators Calculator[]   @relation(references: [id])
+}
+
+model UnitCategory {
+  id        Int      @default(autoincrement()) @id
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+  name      String   @unique
+  units     Unit[]
+  inputs    Input[]
+}
+
+model Unit {
+  id        Int          @default(autoincrement()) @id
+  createdAt DateTime     @default(now())
+  updatedAt DateTime     @updatedAt
+  name      String       @unique
+  symbol    String       @unique
+  factor    Float
+  category  UnitCategory @relation(references: [id])
+}
```


