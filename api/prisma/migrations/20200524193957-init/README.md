# Migration `20200524193957-init`

This migration has been generated by curbol at 5/24/2020, 7:39:57 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."CalculatorCategory" (
"createdAt" DATE NOT NULL DEFAULT CURRENT_TIMESTAMP ,"icon" TEXT   ,"id" INTEGER NOT NULL  ,"name" TEXT NOT NULL  ,"updatedAt" DATE NOT NULL  ,
    PRIMARY KEY ("id"))

CREATE TABLE "quaint"."Calculator" (
"categoryId" INTEGER   ,"createdAt" DATE NOT NULL DEFAULT CURRENT_TIMESTAMP ,"defaultOutputUnit" TEXT NOT NULL  ,"description" TEXT NOT NULL  ,"id" INTEGER NOT NULL  ,"key" TEXT NOT NULL  ,"name" TEXT NOT NULL  ,"updatedAt" DATE NOT NULL  ,
    PRIMARY KEY ("id"),FOREIGN KEY ("categoryId") REFERENCES "CalculatorCategory"("id") ON DELETE SET NULL ON UPDATE CASCADE)

CREATE TABLE "quaint"."Input" (
"createdAt" DATE NOT NULL DEFAULT CURRENT_TIMESTAMP ,"defaultUnit" TEXT NOT NULL  ,"icon" TEXT   ,"id" INTEGER NOT NULL  ,"name" TEXT NOT NULL  ,"unitCategoryId" INTEGER   ,"updatedAt" DATE NOT NULL  ,
    PRIMARY KEY ("id"),FOREIGN KEY ("unitCategoryId") REFERENCES "UnitCategory"("id") ON DELETE SET NULL ON UPDATE CASCADE)

CREATE TABLE "quaint"."SelectOption" (
"createdAt" DATE NOT NULL DEFAULT CURRENT_TIMESTAMP ,"id" INTEGER NOT NULL  ,"selectId" INTEGER   ,"text" TEXT NOT NULL  ,"updatedAt" DATE NOT NULL  ,
    PRIMARY KEY ("id"),FOREIGN KEY ("selectId") REFERENCES "Select"("id") ON DELETE SET NULL ON UPDATE CASCADE)

CREATE TABLE "quaint"."Select" (
"createdAt" DATE NOT NULL DEFAULT CURRENT_TIMESTAMP ,"icon" TEXT   ,"id" INTEGER NOT NULL  ,"name" TEXT NOT NULL  ,"updatedAt" DATE NOT NULL  ,
    PRIMARY KEY ("id"))

CREATE TABLE "quaint"."UnitCategory" (
"createdAt" DATE NOT NULL DEFAULT CURRENT_TIMESTAMP ,"id" INTEGER NOT NULL  ,"name" TEXT NOT NULL  ,"updatedAt" DATE NOT NULL  ,
    PRIMARY KEY ("id"))

CREATE TABLE "quaint"."Unit" (
"categoryId" INTEGER   ,"createdAt" DATE NOT NULL DEFAULT CURRENT_TIMESTAMP ,"factor" REAL NOT NULL  ,"id" INTEGER NOT NULL  ,"name" TEXT NOT NULL  ,"symbol" TEXT NOT NULL  ,"updatedAt" DATE NOT NULL  ,
    PRIMARY KEY ("id"),FOREIGN KEY ("categoryId") REFERENCES "UnitCategory"("id") ON DELETE SET NULL ON UPDATE CASCADE)

CREATE TABLE "quaint"."_CalculatorToInput" (
"A" INTEGER NOT NULL  ,"B" INTEGER NOT NULL  ,FOREIGN KEY ("A") REFERENCES "Calculator"("id") ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY ("B") REFERENCES "Input"("id") ON DELETE CASCADE ON UPDATE CASCADE)

CREATE TABLE "quaint"."_CalculatorToSelect" (
"A" INTEGER NOT NULL  ,"B" INTEGER NOT NULL  ,FOREIGN KEY ("A") REFERENCES "Calculator"("id") ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY ("B") REFERENCES "Select"("id") ON DELETE CASCADE ON UPDATE CASCADE)

CREATE UNIQUE INDEX "quaint"."CalculatorCategory.name" ON "CalculatorCategory"("name")

CREATE UNIQUE INDEX "quaint"."Calculator.key" ON "Calculator"("key")

CREATE UNIQUE INDEX "quaint"."Calculator.name" ON "Calculator"("name")

CREATE UNIQUE INDEX "quaint"."Input.name" ON "Input"("name")

CREATE UNIQUE INDEX "quaint"."Select.name" ON "Select"("name")

CREATE UNIQUE INDEX "quaint"."UnitCategory.name" ON "UnitCategory"("name")

CREATE UNIQUE INDEX "quaint"."Unit.name" ON "Unit"("name")

CREATE UNIQUE INDEX "quaint"."Unit.symbol" ON "Unit"("symbol")

CREATE UNIQUE INDEX "quaint"."_CalculatorToInput_AB_unique" ON "_CalculatorToInput"("A","B")

CREATE  INDEX "quaint"."_CalculatorToInput_B_index" ON "_CalculatorToInput"("B")

CREATE UNIQUE INDEX "quaint"."_CalculatorToSelect_AB_unique" ON "_CalculatorToSelect"("A","B")

CREATE  INDEX "quaint"."_CalculatorToSelect_B_index" ON "_CalculatorToSelect"("B")

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200524193957-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,82 @@
+datasource db {
+  provider = "sqlite"
+  url      = env("DATABASE_URL")
+}
+
+generator prisma_client {
+  provider = "prisma-client-js"
+}
+
+model CalculatorCategory {
+  id          Int          @default(uuid()) @id
+  createdAt   DateTime     @default(now())
+  updatedAt   DateTime     @updatedAt
+  name        String       @unique
+  calculators Calculator[]
+  icon        String?
+}
+
+model Calculator {
+  id                Int                 @default(uuid()) @id
+  createdAt         DateTime            @default(now())
+  updatedAt         DateTime            @updatedAt
+  key               String              @unique
+  name              String              @unique
+  description       String
+  defaultOutputUnit String
+  inputs            Input[]             @relation(references: [id])
+  selects           Select[]            @relation(references: [id])
+  category          CalculatorCategory? @relation(fields: [categoryId], references: [id])
+  categoryId        Int?
+}
+
+model Input {
+  id             Int           @default(uuid()) @id
+  createdAt      DateTime      @default(now())
+  updatedAt      DateTime      @updatedAt
+  name           String        @unique
+  defaultUnit    String
+  icon           String?
+  calculators    Calculator[]  @relation(references: [id])
+  unitCategory   UnitCategory? @relation(fields: [unitCategoryId], references: [id])
+  unitCategoryId Int?
+}
+
+model SelectOption {
+  id        Int      @default(uuid()) @id
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+  text      String
+  select    Select?  @relation(fields: [selectId], references: [id])
+  selectId  Int?
+}
+
+model Select {
+  id          Int            @default(uuid()) @id
+  createdAt   DateTime       @default(now())
+  updatedAt   DateTime       @updatedAt
+  name        String         @unique
+  icon        String?
+  options     SelectOption[]
+  calculators Calculator[]   @relation(references: [id])
+}
+
+model UnitCategory {
+  id        Int      @default(uuid()) @id
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+  name      String   @unique
+  units     Unit[]
+  inputs    Input[]
+}
+
+model Unit {
+  id         Int           @default(uuid()) @id
+  createdAt  DateTime      @default(now())
+  updatedAt  DateTime      @updatedAt
+  name       String        @unique
+  symbol     String        @unique
+  factor     Float
+  category   UnitCategory? @relation(fields: [categoryId], references: [id])
+  categoryId Int?
+}
```


